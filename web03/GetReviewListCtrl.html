<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>이용후기</title>
    <!-- css -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
	<!-- font -->
	<link href="https://webfontworld.github.io/SCoreDream/SCoreDream.css" rel="stylesheet">
	<!-- jquery -->
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <style>
    /* header */
    .navbar-item img { max-height: none; }
    #gnb .navbar-link::after { content: ""; display: none; }
    .navbar-dropdown.cate { min-width: 1900px; width: 100%; position: absolute; left: -150px; }
    .navbar-dropdown.cate a { display: inline-block; padding: 8px; margin-right: 20px; 
        width: 200px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; 
        font-weight: 500; text-align: center; }
    .container:not(.is-max-desktop):not(.is-max-widescreen) { max-width: 1900px; }
    /* body */
    abbr { text-decoration: none; padding-right: 100px; }
    .breadcrumb { border-bottom:1px solid #ddd; padding-bottom:8px; padding-left:20px;
        min-height:48px; line-height:48px; }
    .inline { margin-right: 1rem; }
    .hidden_item { display:none; }
    .star_data { height:36px; position:relative; background-image:url("./data/star.png"); 
        background-repeat:no-repeat; background-position:left center; background-size:100px auto; }
    #star_group { width:100px; height:36px; position:relative; }
    #star_group #stardate { width:100px; height:36px; background-image:url("./data/star1.png"); 
        background-repeat:no-repeat; background-position:left center; background-size:100px auto; }
    #star_group #starrate { width:100px; height:36px; background-image:url("./data/star.png"); 
        background-repeat:no-repeat; background-position:left center; background-size:100px auto; }
    #star10:checked ~ #star_group #starrate { width:100px; }
    #star9:checked ~ #star_group #starrate { width:90px; }
    #star8:checked ~ #star_group #starrate { width:80px; }
    #star7:checked ~ #star_group #starrate { width:70px; }
    #star6:checked ~ #star_group #starrate { width:60px; }
    #star5:checked ~ #star_group #starrate { width:50px; }
    #star4:checked ~ #star_group #starrate { width:40px; }
    #star3:checked ~ #star_group #starrate { width:30px; }
    #star2:checked ~ #star_group #starrate { width:20px; }
    #star1:checked ~ #star_group #starrate { width:10px; }
    #star_btn { width:100px; height:36px; position:absolute; z-index:20; top:0; left:0; }
    #star_btn label { display:block; width:10px; height:36px; position:relative; float:left; }
    </style>
</head>
<script>
$(document).ready( function () {
    $('#tb1').DataTable();
} );
</script>
<body>
    <div id="nav-group">
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a class="navbar-item" href="./index.html">
                <img src="https://www.ddm.go.kr/common/images/layout/logo_bi_s2022.png" width="144" height="72">
                </a>
        
            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
            </div>

            <div id="navbarBasicExample" class="navbar-menu">
                <div class="navbar-start" id="gnb">
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="./GetTourCateListCtrlcateA.html" class="navbar-link is-arrowless">테마관광</a>
                        <div class="navbar-dropdown cate" id="cate1">
                            <a href="./GetTourDetailCtrlno1.html">제기동 골목이야기</a>
                            <a href="./GetTourDetailCtrlno1.html">도심 속 산책길</a>
                        </div>
                    </div>
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="./GetTourCateListCtrlcateB.html" class="navbar-link is-arrowless">축제와 문화</a>
                        <div class="navbar-dropdown cate" id="cate2">
                            <a href="./GetTourDetailCtrlno3.html">배봉산 해맞이 축제</a>
                            <a href="./GetTourDetailCtrlno4.html">동대문봄꽃축제</a>
                        </div>
                    </div>
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="./GetTourCateListCtrlcateC.html" class="navbar-link is-arrowless">문화재와 역사</a>
                        <div class="navbar-dropdown cate" id="cate3">
                            <a href="./GetTourDetailCtrlno5.html">하정 유관에 얽힌 이야기</a>
                            <a href="./GetTourDetailCtrlno6.html">안암천, 안감내 다리에 얽힌 옛날 이야기</a>
                        </div>
                    </div>
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="./GetTourCateListCtrlcateD.html" class="navbar-link is-arrowless">관광과 명소</a>
                        <div class="navbar-dropdown cate" id="cate4">
                            <a href="./GetTourDetailCtrlno7.html">명소</a>
                            <a href="./GetTourDetailCtrlno8.html">쇼핑</a>
                            <a href="./GetTourDetailCtrlno9.html">식도락</a>
                        </div>
                    </div>
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="./GetTourCateListCtrlcateE.html" class="navbar-link is-arrowless">참여마당</a>
                        <div class="navbar-dropdown cate" id="cate5">
                            <a href="./GetTourDetailCtrlno10.html">관광불편신고</a>
                            <a href="./GetTourDetailCtrlno11.html">촬영신청 안내</a>
                        </div>
                    </div>
                    <div class="navbar-item has-dropdown is-hoverable single">
                        <a href="./GetNoticeListCtrl.html" class="navbar-link">동대문소식</a>
                        <div class="navbar-dropdown single">
                            <a class="navbar-item" href="./GetNoticeListCtrl.html">공지사항</a>
                            <a class="navbar-item" href="./GetQnaListCtrl.html">QnA</a>
                            <a class="navbar-item" href="./GetReviewListCtrl.html">여행후기</a>			     
                        </div> 
                    </div>
                </div>
            
                <div class="navbar-end" id="tnb">
                    <div class="navbar-item">
                        <div class="buttons">
                            <a class="button is-primary" href="./UserInfoCtrl.html"><strong>회원정보</strong></a>
                            <a class="button is-light" href="./index.html">로그아웃</a>
                            <a class="button is-light" href="./AdminCtrl.html">관리자</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <script>
        $(document).ready(function(){
            $.ajax({
                url:"/pro3/MenuCtrl.do",
                type:"post",
                entype:"UTF-8",
                datatype:"json",
                processData:false,
                contentType:false,
                cache:false,
                success:function(data){
                    $(".navbar-dropdown.cate").empty();
                    var trans = $.parseJSON(data);
                    console.log(trans);
                    $.each(trans, function(key, value){
                        if(key=="data"){
                            for(var i=0;i<value.length;i++){
                                if(value[i].cate=="A"){
                                    $("#cate1").append("<a href='/pro3/GetTourDetailCtrl.do?no="+value[i].no+"'>"+value[i].place+"</a>");
                                } else if(value[i].cate=="B"){
                                    $("#cate2").append("<a href='/pro3/GetTourDetailCtrl.do?no="+value[i].no+"'>"+value[i].place+"</a>");
                                } else if(value[i].cate=="C"){
                                    $("#cate3").append("<a href='/pro3/GetTourDetailCtrl.do?no="+value[i].no+"'>"+value[i].place+"</a>");
                                } else if(value[i].cate=="D"){
                                    $("#cate4").append("<a href='/pro3/GetTourDetailCtrl.do?no="+value[i].no+"'>"+value[i].place+"</a>");
                                } else if(value[i].cate=="E"){
                                    $("#cate5").append("<a href='/pro3/GetTourDetailCtrl.do?no="+value[i].no+"'>"+value[i].place+"</a>");
                                }
                            }
                        }
                    });
                }
            });
        });
        </script>
    </div>
    <!-- Breadcrumb -->
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="./index.html">홈</a></li>
            <li><a href="./GetQnaListCtrl.html">이용후기</a></li>
        </ul>
    </nav>
	<section class="section">
		<div class="container">
			<h1 class="title">이용후기 목록</h1>
			<table class="table" id="tb1">
				<thead>
					<tr>
						<th>Place</th>
						<th>Content</th>
                        <th>Star</th>
						<th>Id</th>
						<th>RegDate</th>
                        <th></th>
					</tr>
				</thead>
				<tbody>
					<tr>
                        <td>
                            <input type="hidden" name="no" id="no" value="1" />
                            <h3>제기동 골목이야기</h3>
                        </td>
                        <td>
                            <div>즐거웠어요~!</div>
                        </td>
                        <td>
                            <input type="hidden" name="star" id="star" />
                            <div class="star_data" style="width:100.0px"></div>
                        </td>
                        <td>ad***</td>
                        <td>2022-11-25</td>
                        <td>
                            <a href="./DeleteReviewCtrlno1.html" class="button is-primary">삭제</a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="hidden" name="no" id="no" value="2" />
                            <h3>도심 속 산책길</h3>
                        </td>
                        <td>
                            <div>최고에요! 다음에 또 신청할게요!</div>
                        </td>
                        <td>
                            <input type="hidden" name="star" id="star" />
                            <div class="star_data" style="width:80.0px"></div>
                        </td>
                        <td>ad***</td>
                        <td>2022-11-25</td>
                        <td>
                            <a href="./DeleteReviewCtrlno2.html" class="button is-primary">삭제</a>
                        </td>
                    </tr>
				</tbody>
			</table>
            <table class="table">
                <tbody>
                    <tr>
                        <td style="width:160px">
                            <div class="select" style="width:150">
                                <select name="cate" id="cate" class="select" onchange="changeTourNo()" style="width:150" required>
                                <option value="">분류선택</option>
                                <option value="A">테마관광</option>
                                <option value="B">축제와 문화</option>
                                <option value="C">문화재와 역사</option>
                                <option value="D">관광과 명소</option>
                                <option value="E">참여마당</option>
                                </select>
                            </div>
                            <br>
                            <div class="select" style="width:150">
                                <select name="tourno" id="tourno" style="width:150" required>
                                    <option value="">선택</option>
                                    <option value="1">제기동 골목이야기</option>
                                    <option value="2">도심 속 산책길</option>
                                </select>
                            </div>
                        </td>
                        <td style="width:100px">
                            <input type="radio" name="star" id="star10" class="hidden_item" value="5" checked>
                            <input type="radio" name="star" id="star9" class="hidden_item" value="4.5">
                            <input type="radio" name="star" id="star8" class="hidden_item" value="4">
                            <input type="radio" name="star" id="star7" class="hidden_item" value="3.5">
                            <input type="radio" name="star" id="star6" class="hidden_item" value="3">
                            <input type="radio" name="star" id="star5" class="hidden_item" value="2.5">
                            <input type="radio" name="star" id="star4" class="hidden_item" value="2">
                            <input type="radio" name="star" id="star3" class="hidden_item" value="1.5">
                            <input type="radio" name="star" id="star2" class="hidden_item" value="1">
                            <input type="radio" name="star" id="star1" class="hidden_item" value="0.5">
                            <input type="hidden" name="starpoint" id="starpoint" value="">
                            <div id="star_group">
                                <div id="stardate">
                                    <div id="starstar"></div>
                                </div>
                                <div class="star_btn" id="star_btn">
                                    <label for="star1"></label>
                                    <label for="star2"></label>
                                    <label for="star3"></label>
                                    <label for="star4"></label>
                                    <label for="star5"></label>
                                    <label for="star6"></label>
                                    <label for="star7"></label>
                                    <label for="star8"></label>
                                    <label for="star9"></label>
                                    <label for="star10"></label>
                                </div>
                            </div>
                        </td>
                        <td style="min-width:400px">
                            <input type="text" name="content" id="content" class="input" placeholder="소중한 후기 한 줄 부탁드립니다." required>
                        </td>
                        <td>
                            <div class="buttons">
                                <button type="button" class="button is-primary" onclick="addReview()">작성</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>		
		</div>
		<script>
	    $(document).ready(function(){
	    	$("#content").on("click", function(){
	    		if($("#tourno").val()==""){
	    			alert("방문 장소를 먼저 고르십시오.");
	    		}
	    	});
	    	
	    	$("#star_btn label").click(function(){
	    		if($("#tourno").val()==""){
	    			alert("방문 장소를 먼저 고르십시오.");
	    			$("#tourno").focus();
	    		} else {
	    			$("#starpoint").val(($(this).index()+1)/2);
	    		}
	    	});
	    });
	    function changeTourNo(){
	    	var ct = $("#cate").val(); 
	    	if(ct==""){
	    		alert("카테고리를 먼저 선택하십시오.");
	    		return;
	    	}
	    	var params = { cate : ct }
			$.ajax({
				url:"/pro3/CateLoadCtrl.do",
				type:"POST",
				enctype:"application/json",
				data:params,
				datatype:"json",
				success:function(result){
					$("#tourno").empty();
					$("#tourno").append("<option value=''>선택</option>");
					var trans = result;
					console.log(trans);
					$.each(trans, function(key, value){
						if(key=="result"){
							for(var i=0;i<value.length;i++){
								$("#tourno").append("<option value='"+value[i].tourno+"'>"+value[i].place+"</option>");
							}
						}
					});				
				}
			});
	    }
	    function addReview(){
	    	var ct = $("#cate").val();
	    	var tour = $("#tourno").val();
	    	var con = $("#content").val();
	    	var starpoint = $("#starpoint").val();
	    	if(ct==""){
	    		alert("카테고리를 먼저 선택하십시오.");
	    		return;
	    	}
	    	if(tour==""){
	    		alert("방문 장소를 먼저 선택하십시오.");
	    		return;
	    	}
	    	if(con==""){
	    		alert("내용을 입력하십시오.");
	    		return;
	    	}
	    	if(starpoint==""){
	    		alert("별점을 먼저 선택하십시오.");
	    		return;
	    	}
	    	var params = { cate : ct, tourno : tour, content : con, star : starpoint }
			$.ajax({
				url:"/pro3/AddReviewCtrl.do",
				type:"POST",
				enctype:"application/json",
				data:params,
				datatype:"json",
				success:function(result){
					var trans = result;
					location.href = "./GetReviewListCtrl.html";	
				}
			});
	    }
	    </script>
	</section>
    <!-- Footer -->
	<div class="hero-foot">
		<footer class="footer">
		<div class="content has-text-left">
			<div class="footer_content">
				<a href="" class="link_anchor">개인정보처리지침</a>·
				<a href="" class="link_anchor">누리집오류신고</a>
				<div class="footer_info">
					<span class="address">[02565]서울시 동대문구 천호대로 145(용두동)</span>&nbsp;|&nbsp;
					<span>전화 : 02-2127-5000  근무시간 09 : 00 ~ 18 : 00(평일) 휴무(토,일요일)</span>&nbsp;|&nbsp;
					<span>FAX : 02.2127.5096</span>
					<p class="copyright">Copyright＠ 2021 DONGDAEMUN-GU all rights reserved.</p>
				</div>
			</div>
		</div>
		</footer>
	</div>
</body>
</html>